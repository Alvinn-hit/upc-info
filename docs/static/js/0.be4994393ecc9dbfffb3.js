webpackJsonp([0],{"/a+a":function(t,e){},"72US":function(t,e,n){t.exports=n.p+"static/img/find.d8e5d4b.png"},"9bBU":function(t,e,n){n("mClu");var a=n("FeBl").Object;t.exports=function(t,e,n){return a.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},Cj8Q:function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),i=n.n(s),o=n("d2gY"),u=n("hrn7"),l=function(){function t(e){r()(this,t),c.call(this),this.commonUrl=null!==e&&void 0!==e?e:this.commonUrl}return i()(t,[{key:"_getData",value:function(t,e){for(var n in t+="?authentication="+u.a.getLocalToken(),e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t=t.split("").splice(0,t.length-1).join(""),t=this.commonUrl+t,console.log("get method",t),fetch(t,{method:"get"})}},{key:"_postData",value:function(t,e){t+="?Authorization="+u.a.getLocalToken();var n=new FormData;for(var a in e)e.hasOwnProperty(a)&&n.append(a,e[a]);return fetch(this.commonUrl+t,{method:"post",body:e,fd:n})}},{key:"getJsonData",value:function(t,e){return this._getData(t,e).then(function(t){return t.json()})}},{key:"getTextData",value:function(t,e){return this._getData(t,e).then(function(t){return t.text()})}},{key:"postJsonData",value:function(t,e){return this._postData(t,e).then(function(t){return t.json()})}},{key:"postTextData",value:function(t,e){return this._postData(t,e).then(function(t){return t.text()})}}]),t}(),c=function(){this.commonUrl=o.a},f=l,h=function(){function t(e,n){r()(this,t),this.uploadUrl="/upload/file",this.httpRequest=new f(e),this.uploadUrl=null!==n&&void 0!==n?n:this.uploadUrl}return i()(t,[{key:"fetchFile",value:function(t,e,n){var a=(n=null!==n&&void 0!==n?n:document).createElement("form");a.appendChild(t.cloneNode());var r=new FormData(a);return"text"===e?this.httpRequest.postTextData(this.uploadUrl,r).then(function(t){return d+"/"+t.data}):this.httpRequest.postJsonData(this.uploadUrl,r).then(function(t){return d+"/"+t.data})}}]),t}();n.d(e,"c",function(){return p}),n.d(e,"b",function(){return d});var d="http://yb.upc.edu.cn/file/image",v=new f("http://yb.upc.edu.cn:8085"),p=new h("http://yb.upc.edu.cn:8084");e.a=v},Mixg:function(t,e,n){t.exports=n.p+"static/img/user.13206ea.png"},S5o2:function(t,e){},Uotg:function(t,e){},"Y5+g":function(t,e){},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},"aO/F":function(t,e){},d2gY:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return s});var a="http://yb.upc.edu.cn:8084/",r="yb_uid",s="verify_request"},egpO:function(t,e,n){"use strict";var a={name:"Header",data:function(){return{token:123}},beforeMount:function(){null!==this._props.title&&void 0!==this._props.title&&(document.querySelector("title").innerHTML=this._props.title);var t=this._props.yibanAuth;t&&t.fetchVq(),t&&t.refreshToken()},props:["title","yibanAuth"]},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"header"},[this._t("default")],2)},staticRenderFns:[]};var s=n("VU/8")(a,r,!1,function(t){n("fveg")},null,null);e.a=s.exports},fveg:function(t,e){},gWTr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"ManagerHeader",props:["userData"],data:function(){return{}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"UserBox"},[n("ul",{staticClass:"clear"},[n("li",[n("img",{attrs:{src:t.userData.userHeader}})]),t._v(" "),n("li",{staticClass:"second",staticStyle:{width:"50%"}},[n("span",{staticClass:"user-name"},[t._v(t._s(t.userData.userName)+" - ")]),t._v(" "),n("span",{staticClass:"user-id"},[t._v("ID : "+t._s(t.userData.userId))]),t._v(" "),n("p",{staticClass:"time"},[t._v("两小时前发布")])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"float-right"},[e("p",[this._v("#5")])])}]};var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ManagerDiscuss"},[n("ul",{staticClass:"clear"},[1===t.images.length?n("li",{staticClass:"float-left big"},[n("img",{attrs:{src:t.images[0]}})]):t._e(),t._v(" "),t._l(t.images,function(e,a){return 1!==t.images.length?n("li",{staticClass:"float-left"},[a<=1?n("img",{attrs:{src:e}}):t._e()]):t._e()})],2),t._v(" "),n("p",{staticClass:"describe overflow-omit"},[t._v(" "+t._s(this.describe))])])},staticRenderFns:[]};var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ManagerReply"},[n("div",{staticClass:"reply"},[n("div",{staticClass:"border-left"}),t._v(" "),t._l(t.replyList,function(e,a){return a<=1?n("p",[t._v("\n            "+t._s(e.user)+" : "+t._s(e.message)+"\n        ")]):t._e()})],2)])},staticRenderFns:[]};var o={name:"index",props:["userData","managerImage"],data:function(){return{managerReplyList:[{user:"用户1",message:"第一条消息"},{user:"用户二",message:"第二条消息"}]}},components:{ManagerHeader:n("VU/8")(a,r,!1,function(t){n("aO/F")},null,null).exports,ManagerDetails:n("VU/8")({name:"ManagerDetails",props:["images","describe"],data:function(){return{}}},s,!1,function(t){n("S5o2")},null,null).exports,ManagerReply:n("VU/8")({name:"ManagerReply",data:function(){return{}},beforeMount:function(){},props:["replyList"]},i,!1,function(t){n("Y5+g")},null,null).exports}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ManagerSection"},[n("manager-header",{attrs:{userData:t.userData}}),t._v(" "),n("manager-details",{attrs:{images:t.managerImage,describe:123132}}),t._v(" "),n("manager-reply",{attrs:{replyList:t.managerReplyList}}),t._v(" "),n("hr"),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"clear manager-footer"},[e("li",{staticClass:"float-right"},[this._v("留言2")]),this._v(" "),e("li",{staticClass:"float-right"},[this._v(" · ")]),this._v(" "),e("li",{staticClass:"float-right"},[this._v("收藏12")])])}]};var l=n("VU/8")(o,u,!1,function(t){n("/a+a")},null,null).exports,c=n("hrn7"),f=n("egpO"),h=n("Cj8Q"),d=new c.b("https://openapi.yiban.cn/oauth/authorize?client_id=ee3cf6b53f16b07f&redirect_uri=http://f.yiban.cn/iapp218463",h.a,"second","mobile"),v={name:"HomePage",data:function(){var t=c.a.getLocalUserData();return{find:n("72US"),user:n("Mixg"),managerSectionList:[{userData:t,managerImage:[]}],yibanAuth:d}},created:function(){},components:{ManagerSection:l,HeaderSection:f.a}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"HomePage"},[n("header-section",{attrs:{title:"中国石油大学二手市场物品交易社区",yibanAuth:t.yibanAuth}},[n("p",[t._v("中国石油大学二手市场物品交易社区")])]),t._v(" "),t._m(0),t._v(" "),n("hr"),t._v(" "),n("br"),t._v(" "),t._l(t.managerSectionList,function(t){return n("div",[n("manager-section",{staticClass:"bottom-style",attrs:{userData:t.userData,managerImage:t.managerImage}})],1)}),t._v(" "),n("div",{staticClass:"footer"},[n("ul",{staticClass:"clear"},[n("li",{staticClass:"float-left"},[n("img",{attrs:{src:t.find}}),t._v(" "),n("p",[t._v("发现")])]),t._v(" "),t._m(1),t._v(" "),n("li",{staticClass:"float-left"},[n("img",{attrs:{src:t.user}}),t._v(" "),n("p",[t._v("我的")])])])])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search box-center"},[e("label",[e("input",{attrs:{type:"text"}})]),this._v(" "),e("div",{staticClass:"placeholder absolute-center"},[e("p",[this._v("搜索宝贝")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"float-left add"},[e("div",{staticClass:"absolute-horizontal-center"},[e("span",[this._v("+")])]),this._v(" "),e("img",{staticStyle:{opacity:"0"},attrs:{src:""}}),this._v(" "),e("p",[this._v("发布")])])}]};var g=n("VU/8")(v,p,!1,function(t){n("Uotg")},null,null);e.default=g.exports},hrn7:function(t,e,n){"use strict";var a=n("Zrlr"),r=n.n(a),s=n("wxAW"),i=n.n(s),o=n("d2gY"),u=function(){function t(e){r()(this,t),this.httpRequest=e}return i()(t,[{key:"fetchTokenByeText",value:function(t,e,n){var a=new FormData;return a.append("appName",t),a.append("vq",n),a.append("device",e),fetch(this.httpRequest.commonUrl+"/auth",{method:"POST",body:a}).then(function(t){return window.a=t,t.json()}).then(function(t){window.sessionStorage.token=t.token})}}]),t}();n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var l=function(){function t(e,n,a,s){r()(this,t),this.yibanIdKey=o.c,this.vqKey=o.b,this.vqUrl=e,this.httpRequest=n,this.appName=a,this.device=s}return i()(t,[{key:"fetchVq",value:function(){!1===this.haveVq()&&(window.location=this.vqUrl)}},{key:"haveVq",value:function(){var t=this.getVq();return null!==t&&void 0!==t}},{key:"getVq",value:function(){var e=this.getVqByUrl();return null!==e&&void 0!==e?(t.setVq(e),e):window.sessionStorage.vq}},{key:"refreshToken",value:function(){new u(this.httpRequest).fetchTokenByeText(this.appName,this.device,this.getVq())}},{key:"getVqByUrl",value:function(){var t=window.location.href;if(!t.includes("?")&&!t.includes("=")&&!t.includes(this.vqKey))return null;var e=t.split("?"),n=e[1].split("="),a={yibanId:n[2],vq:n[1].substr(0,n[1].lastIndexOf("&"+this.yibanIdKey))};return window.sessionStorage.yibanId=a.yibanId,window.history.pushState({},"",e[0]),a.vq}}],[{key:"setVq",value:function(t){window.sessionStorage.vq=t}}]),t}(),c=function(){function t(){r()(this,t)}return i()(t,null,[{key:"haveLocalToken",value:function(){var t=window.sessionStorage.token;return null!==t&&void 0!==t}},{key:"getLocalToken",value:function(){return window.sessionStorage.token}},{key:"haveLocalUserData",value:function(){var t=window.localStorage.userData;return null!==t&&void 0!==t&&""!==t}},{key:"getLocalUserData",value:function(){return JSON.parse(window.localStorage.userData)}}]),t}()},mClu:function(t,e,n){var a=n("kM2E");a(a.S+a.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var a,r=n("C4MV"),s=(a=r)&&a.__esModule?a:{default:a};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,s.default)(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}()}});
//# sourceMappingURL=0.be4994393ecc9dbfffb3.js.map