{"version":3,"sources":["webpack:///./src/config/config.js","webpack:///./src/common/util/Token.js","webpack:///./src/common/util/getRequest.js","webpack:///./src/common/util/getYibanData.js","webpack:///./src/common/util/HttpRequest.js","webpack:///./src/common/createFetchWithAuth.js","webpack:///./src/common/UploadFile.js","webpack:///./src/components/SecondaryMarket/config/fetchUtil.js","webpack:///./src/components/SecondaryMarket/config/index.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/_core-js@2.5.5@core-js/library/modules/es6.object.define-property.js","webpack:///./src/components/SecondaryMarket/media/loading.gif","webpack:///src/common/components/HeaderSection.vue","webpack:///./src/common/components/HeaderSection.vue?4576","webpack:///./src/common/components/HeaderSection.vue","webpack:///src/common/components/LoadImage.vue","webpack:///./src/common/components/LoadImage.vue?62ba","webpack:///./src/common/components/LoadImage.vue","webpack:///./src/common/mixins/fetchVq.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/define-property.js","webpack:///./src/common/mixins/loading.js","webpack:///./src/common/mixins/UpdateData.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/createClass.js","webpack:///./node_modules/_core-js@2.5.5@core-js/library/fn/object/define-property.js"],"names":["yibanIdKey","vqKey","util_Token","Token","httpRequest","classCallCheck_default","this","appName","device","vq","fd","FormData","append","fetch","commonUrl","method","body","then","token","json","window","sessionStorage","getRequest","theRequest","strList","location","href","split","console","log","i","length","getYibanData_YibanAuth","YibanAuth","vqUrl","haveVq","localStorage","backUrl","getVq","undefined","urlVq","getVqByUrl","setVq","fetchTokenByText","locationUrl","includes","paramList","yibanId","getYibanData_UserData","HttpRequest_HttpRequest","HttpRequest","_this","HttpRequest__initialiseProps","call","addFetchListen","r","toString","yibanAuth","alert","type","event","_fetchBefore","push","_fetchAfter","_fetchError","index","indexOf","splice","url","_this2","haveLocalToken","refreshToken","_fetchWithListener","_this3","fetchData","toUpperCase","_getData","bind","_postData","forEach","item","catch","data","key","hasOwnProperty","getLocalToken","status","_this4","_fetchCheckToken","checkJsonData","text","_this5","util_HttpRequest","common_createFetchWithAuth","backEndUrl","common_UploadFile","UploadFile","filePrefix","uploadUrl","fileElement","iframeDocument","form","document","createElement","appendChild","cloneNode","formData","postTextData","filePath","postJsonData","fetchUtil","marketFetch","fetchUtil_yibanAuth","upload","uploadFile","exports","__esModule","default","instance","Constructor","TypeError","$export","__webpack_require__","S","F","defineProperty","f","module","p","components_HeaderSection","render","_h","$createElement","_self","_c","staticClass","_t","staticRenderFns","Component","normalizeComponent","name","ssrContext","__webpack_exports__","LoadImage","loading","props","components_LoadImage","staticStyle","width","height","attrs","src","alt","_e","title","created","fetchVq","beforeMount","querySelector","innerHTML","loadState","methods","showLoading","hiddenLoading","beforeDestroy","removeFetchListen","updateData","e","value","obj","_defineProperty","_defineProperty2","defineProperties","target","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","$Object","Object","it","desc"],"mappings":"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","file":"static/js/0.4b2904c8777f63f7844c.js","sourcesContent":["const commonUrl = 'http://yb.upc.edu.cn:8084/'\n/**\n * @namespace window.sessionStorage.vq\n */\nconst yibanIdKey = 'yb_uid'\nconst vqKey = 'verify_request'\n/**\n * stateKey是获取vq时候的第三个可选参数，本项目中依靠该参数实现准确的项目重定向\n * 易班在返回vq的时候只能返回特定的页面，这不符合我们的需求\n * @type {string}\n */\nconst stateKey = 'state'\n\n\n\nexport {commonUrl , yibanIdKey , vqKey , stateKey}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/config.js","class Token {\n    httpRequest\n    constructor (httpRequest) {\n        this.httpRequest = httpRequest\n    }\n    fetchTokenByText (appName , device , vq) {\n        const fd = new FormData();\n        fd.append('appName' , appName)\n        fd.append('vq' , vq)\n        fd.append('device' , device)\n        /**\n         * @namespace fetch\n         */\n        return fetch(this.httpRequest.commonUrl + '/auth' , {\n            method : 'POST',\n            body: fd\n        }).then(token => {\n            return token.json()\n        }).then(json => {\n            window.sessionStorage.token = json.token\n            return json.token\n        })\n    }\n}\n\nexport default Token\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/Token.js","function getRequestParamList() {\n    let url = window.location.href.split('?')[1]\n    let theRequest = {}\n    const strList = url.split(\"&\")\n    console.log(strList)\n    for(let i = 0; i < strList.length; i++) {\n        theRequest[strList[i].split(\"=\")[0]] = (strList[i].split(\"=\")[1])\n    }\n    return theRequest\n}\nexport default getRequestParamList\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/getRequest.js","import { vqKey, yibanIdKey} from \"../../config/config\"\nimport Token from \"./Token\"\nimport getRequestParamList from \"./getRequest\"\n\nclass YibanAuth {\n    vqUrl\n    httpRequest\n    appName\n    device\n    yibanIdKey = yibanIdKey\n    vqKey = vqKey\n\n    /**\n     * 获取易班vq以及获取token的方式\n     * @param vqUrl 参考二手市场SecondaryMarket/config/index.js的手法完成vqUrl的填写\n     * @param httpRequest 当前轻应用所使用的HttpRequest工具类实体\n     * @param appName 当前轻应用的名称\n     * @param device 当前设备\n     */\n    constructor (vqUrl , httpRequest , appName , device) {\n        this.vqUrl = vqUrl\n        this.httpRequest = httpRequest\n        this.appName = appName\n        this.device = device\n    }\n\n    fetchVq () {\n        if (this.haveVq() === false) {\n            /**\n             * @namespace window.localStorage.backUrl\n             * @type {string}\n             */\n            window.localStorage.backUrl = window.location.href\n            window.location = this.vqUrl\n        }\n    }\n\n    haveVq () {\n        const vq = this.getVq()\n        return vq !== null && vq !== undefined\n    }\n\n    getVq () {\n        const urlVq = this.getVqByUrl()\n        if (urlVq !== null && urlVq !== undefined) {\n            this.setVq(urlVq)\n            return urlVq\n        }\n        return window.sessionStorage.vq\n    }\n\n    setVq(vq) {\n        window.sessionStorage.vq = vq\n    }\n\n    refreshToken() {\n        const tokenUtil = new Token(this.httpRequest)\n        return tokenUtil.fetchTokenByText(this.appName , this.device , this.getVq())\n    }\n    getVqByUrl () {\n        const locationUrl = window.location.href\n        if (!locationUrl.includes('?')\n            && !locationUrl.includes('=')\n            && !locationUrl.includes(this.vqKey)) {\n            return null\n        }\n        /**\n         * @namespace window.sessionStorage.yibanId\n         */\n        const paramList = getRequestParamList()\n        console.log(paramList)\n        window.sessionStorage.yibanId = paramList[yibanIdKey]\n        window.sessionStorage.vq = paramList[vqKey]\n        window.location = window.localStorage.backUrl\n        return paramList[vqKey]\n\n    }\n}\n\nclass UserData {\n\n    static haveLocalToken () {\n        let token = window.sessionStorage.token\n        return token !== null && token !== undefined && token !== 'null' && token !== 'undefined'\n    }\n\n    static getLocalToken () {\n        return window.sessionStorage.token\n    }\n}\n\nexport {UserData, YibanAuth}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/getYibanData.js","import {commonUrl} from \"../../config/config\"\nimport {UserData, YibanAuth} from \"./getYibanData\"\nimport {yibanAuth} from \"../../components/SecondaryMarket/config/fetchUtil\"\n\nclass HttpRequest {\n\n    commonUrl = commonUrl\n    yibanAuth\n    _fetchBefore = []\n    _fetchAfter = []\n    _fetchError = []\n\n    /**\n     * @param commonUrl string 后端地址\n     */\n    constructor (commonUrl) {\n        this.commonUrl = (commonUrl !== null && commonUrl !== undefined) ?\n            commonUrl : this.commonUrl\n        this.addFetchListen('error' , (r) => {\n            window.r = r\n            if (r.toString() === 'TypeError: Failed to fetch') {\n                if (this.yibanAuth && this.yibanAuth.haveVq()) {\n                    alert('请检查链接')\n                }\n            }\n        })\n    }\n\n    addFetchListen(type , event) {\n        if (type === 'before') {\n            this._fetchBefore.push(event)\n        } else if (type === 'after') {\n            this._fetchAfter.push(event)\n        } else {\n            this._fetchError.push(event)\n        }\n    }\n\n    removeFetchListen(type , event) {\n        let index\n        if (type === 'before') {\n            index = this._fetchBefore.indexOf(event)\n            index !== -1 && this._fetchBefore.splice(index , 1)\n        } else if (type === 'after') {\n            index = this._fetchAfter.indexOf(event)\n            index !== -1 && this._fetchAfter.splice(index , 1)\n        } else {\n            index = this._fetchError.indexOf(event)\n            index !== -1 && this._fetchError.splice(index , 1)\n        }\n    }\n\n    _fetchCheckToken(method , url , body) {\n        if (!UserData.haveLocalToken() && this.yibanAuth) {\n            return this.yibanAuth.refreshToken().then(() => {\n                return this._fetchWithListener(method , url , body)\n            })\n        } else {\n            return this._fetchWithListener(method , url , body)\n        }\n    }\n\n    _fetchWithListener(method , url , body) {\n        let fetchData\n        if (method.toUpperCase() === 'GET') {\n            fetchData = this._getData.bind(this)\n        } else if (method.toUpperCase() === 'POST') {\n            fetchData = this._postData.bind(this)\n        } else {\n            return console.log('不支持提交put与delete方法')\n        }\n        this._fetchBefore && this._fetchBefore.forEach(item => item(url , body))\n        return fetchData(url , body)\n            .catch(r => {\n                return this._fetchError && this._fetchError.forEach(item => item(r))\n            }).then(data => {\n                this._fetchAfter && this._fetchAfter.forEach(item => item(data))\n                return data\n            })\n    }\n    /**\n     * @namespace fetch\n     * @param url 链接\n     * @param body 对象形式传入参数列表\n     * @returns {*}\n     * @private\n     */\n\n    _getData (url, body) {\n        url += '?'\n        for (let key in body) {\n            if (body.hasOwnProperty(key)) {\n                url += key + '=' + body[key] + '&'\n            }\n        }\n        url += `Authorization=${UserData.getLocalToken()}`\n        url = this.commonUrl + url\n        console.log('get method', url)\n        return fetch(url, {\n            method: 'get',\n            // 后端跨域不允许携带cookie？等到后端支持跨域携带cookie以后取消掉改注释\n            // credentials: \"include\"\n        })\n    }\n\n    _postData (url, body) {\n        url += '?Authorization=' + UserData.getLocalToken()\n        let fd = new FormData()\n        if (body instanceof FormData) {\n            fd = body\n        } else {\n            for (let key in body) {\n                if (body.hasOwnProperty(key)) {\n                    fd.append(key, body[key])\n                }\n            }\n        }\n        console.log('POST method' , this.commonUrl+url)\n        console.log('formData' , body)\n        return fetch(this.commonUrl + url, {\n            method: 'post',\n            body: fd,\n            // 后端跨域不允许携带cookie？等到后端支持跨域携带cookie以后取消掉改注释\n            // credentials: \"include\"\n        })\n    }\n\n    checkJsonData(json) {\n        return json.status && json.status === 500\n    }\n\n    getJsonData (url, body) {\n        /**\n         * @namespace r.json\n         */\n        return this._fetchCheckToken('get' , url, body).then(r => {\n            return r.json()\n        }).then(json => {\n            if (this.checkJsonData(json)) {\n                console.log('与后端交互出错' , 'GET '+ url , body)\n            }\n            return json\n        })\n    }\n\n    getTextData (url, body) {\n        return this._fetchCheckToken('get' , url, body).then(r => {\n            return r.text()\n        })\n    }\n\n    postJsonData (url, body) {\n        return this._fetchCheckToken('post' , url, body).then(r => {\n            return r.json()\n        }).then(json => {\n            if (this.checkJsonData(json)) {\n                console.log('与后端交互出错' , 'POST ' + url , body)\n            }\n            return json\n        })\n    }\n\n    postTextData (url, body) {\n        return this._fetchCheckToken('post' , url, body).then(r => {\n            return r.text()\n        })\n    }\n}\n\nexport default HttpRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util/HttpRequest.js","/**\n * 创建一个拥有httpRequest和yibanAuth的对象\n */\nimport HttpRequest from \"./util/HttpRequest\"\nimport {YibanAuth} from \"./util/getYibanData\"\n\nfunction createFetchWithAuth (backEndUrl , vqUrl , appName , device) {\n    const httpRequest = new HttpRequest(backEndUrl)\n    const yibanAuth = new YibanAuth(vqUrl , new HttpRequest(backEndUrl) , appName , device)\n    httpRequest.yibanAuth = yibanAuth\n    return {\n        httpRequest,\n        yibanAuth\n    }\n}\n\nexport default createFetchWithAuth\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/createFetchWithAuth.js","\n/**\n * 上传文件是没有加载中动态图功能的API\n */\nclass UploadFile {\n    uploadUrl = '/upload/file'\n    httpRequest\n    filePrefix = 'http://yb.upc.edu.cn'\n\n    constructor (httpRequest , filePrefix , uploadUrl) {\n        this.httpRequest = httpRequest\n        filePrefix && (this.filePrefix = filePrefix)\n        this.uploadUrl = (uploadUrl !== null && uploadUrl !== undefined) ?\n            uploadUrl : this.uploadUrl\n    }\n\n    /**\n     * @author 雷诺\n     * @param fileElement 当前input的element DOM元素\n     * @param type 远程接口返回值的格式，只支持 json text\n     * @param iframeDocument 标定document，如果要兼容ie createElement有iframe的兼容问题，\n     *                          具体百度，自然知道这个参数是啥\n     */\n    fetchFile (fileElement , type , iframeDocument) {\n        iframeDocument = (iframeDocument !== null && iframeDocument !== undefined) ?\n            iframeDocument : document\n        let form = iframeDocument.createElement('form')\n        form.appendChild(fileElement.cloneNode())\n        let formData = new FormData(form)\n        if (type === 'text') {\n            return this.httpRequest.postTextData(this.uploadUrl , formData)\n                .then(filePath => {\n                    return `${this.filePrefix}/${filePath.data}`\n                })\n        } else {\n            return this.httpRequest.postJsonData(this.uploadUrl , formData)\n                .then(filePath => {\n                    return `${this.filePrefix}/${filePath.data}`\n                })\n        }\n    }\n}\nexport default UploadFile\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/UploadFile.js","import createFetchWithAuth from \"../../../common/createFetchWithAuth\"\nimport {appName, device, vqUrl} from \"./index\"\nimport UploadFile from \"../../../common/UploadFile\"\nimport HttpRequest from \"../../../common/util/HttpRequest\"\n\nconst backEndUrl = 'http://yb.upc.edu.cn:8085'\nconst devBackEndUrl = 'http://yb.upc.edu.cn:8084'\n\nconst fetchUtil = createFetchWithAuth(backEndUrl , vqUrl , appName , device)\n\nconst filePrefix = 'http://yb.upc.edu.cn'\nconst marketFetch = fetchUtil.httpRequest\nconst yibanAuth = fetchUtil.yibanAuth\n\nconst upload = new HttpRequest(devBackEndUrl)\nupload.yibanAuth = yibanAuth\n\nconst uploadFile = new UploadFile(upload , filePrefix)\n\n\nexport {marketFetch , yibanAuth , uploadFile}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SecondaryMarket/config/fetchUtil.js","const appId = 'ee3cf6b53f16b07f'\nconst backUrl = 'http://f.yiban.cn/iapp218463'\n\n\nconst vqUrl = `https://openapi.yiban.cn/oauth/authorize?client_id=${appId}&redirect_uri=${backUrl}`\nconst appName = 'second'\nconst device = 'mobile'\nexport {appName , vqUrl , device}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SecondaryMarket/config/index.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/classCallCheck.js\n// module id = AA3o\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.5.5@core-js/library/modules/es6.object.define-property.js\n// module id = Dmm8\n// module chunks = 0","module.exports = __webpack_public_path__ + \"static/img/loading.e450664.gif\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SecondaryMarket/media/loading.gif\n// module id = IaMB\n// module chunks = 0","<template>\n    <div class=\"header\">\n        <slot></slot>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'Header',\n        data () {\n            return {\n            }\n        }\n    };\n</script>\n\n\n<style scoped>\n    .header {\n        background-color: #189FD9;\n        text-align: center;\n        height: 80px;\n        line-height: 80px;\n        color: #FFF;\n        font-size: 1.5rem;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/common/components/HeaderSection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-777a4c9e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/common/components/HeaderSection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-777a4c9e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./HeaderSection.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./HeaderSection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./HeaderSection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-777a4c9e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./HeaderSection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-777a4c9e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/common/components/HeaderSection.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"box-center text-center\" v-if=\"loadState\">\n        <img :src=\"loading\" alt=\"正在加载中\" style=\"width: 133px;height: 80px\">\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'LoadImage',\n        data () {\n            return {\n                loading: require('../../components/SecondaryMarket/media/loading.gif'),\n            }\n        },\n        props: ['loadState']\n    };\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/common/components/LoadImage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loadState)?_c('div',{staticClass:\"box-center text-center\"},[_c('img',{staticStyle:{\"width\":\"133px\",\"height\":\"80px\"},attrs:{\"src\":_vm.loading,\"alt\":\"正在加载中\"}})]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-5994c3f3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/common/components/LoadImage.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./LoadImage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./LoadImage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5994c3f3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./LoadImage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/common/components/LoadImage.vue\n// module id = null\n// module chunks = ","function fetchVq (yibanAuth) {\n    return {\n        data() {\n            return {\n                title: '没有设置title,请详细阅读代码文档',\n                yibanAuth: yibanAuth\n            }\n        },\n        created() {\n            this.yibanAuth && this.yibanAuth.fetchVq()\n        },\n        beforeMount() {\n            if (this.title !== null && this.title !== undefined) {\n                document.querySelector('title').innerHTML = this.title\n            }\n            // this.yibanAuth && this.yibanAuth.refreshToken()\n        }\n    }\n}\nexport default fetchVq\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/mixins/fetchVq.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/define-property.js\n// module id = liLe\n// module chunks = 0","\nfunction loading (httpRequest) {\n\n    return {\n        data: function () {\n            return {\n                loadState: false,\n                fetch: httpRequest\n            }\n        },\n        methods: {\n            showLoading() {\n                this.loadState = true\n            },\n            hiddenLoading() {\n                this.loadState = false\n            }\n        },\n        created() {\n            this.fetch.addFetchListen('before' , this.showLoading)\n            this.fetch.addFetchListen('after' , this.hiddenLoading)\n        },\n        beforeDestroy() {\n            this.fetch.removeFetchListen('before' , this.showLoading)\n            this.fetch.removeFetchListen('after' , this.hiddenLoading)\n        }\n    }\n}\n\nexport default loading\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/mixins/loading.js","/**\n * 这个混入模式太简单不写文档\n * @type {{methods: {updateData: (function(*))}}}\n */\n\nconst updateData = {\n    methods: {\n        updateData(e) {\n            console.log(e)\n            this[e.key] = e.value\n        }\n    }\n}\nexport default updateData\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/mixins/UpdateData.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/createClass.js\n// module id = xSur\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.5.5@core-js/library/fn/object/define-property.js\n// module id = zg6Y\n// module chunks = 0"],"sourceRoot":""}