webpackJsonp([3],{Ylg8:function(t,e){},"eh/N":function(t,e){},h6Bq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("/MSx"),i={mounted:function(){this._props.value&&(this.inputValue=this._props.value)},props:["value","dataKey"],data:function(){return{inputValue:""}},methods:{input:function(t){this.$emit("userInput",{key:this._props.dataKey,value:t.target.value})}}},n={name:"InputBox",mixins:[i],props:["type","placeholder","classes"],data:function(){return{}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"InputBox",on:{change:this.input}},[e("label",[e("input",{class:this.classes,attrs:{type:this.type,name:this.dataKey,placeholder:this.placeholder},domProps:{value:this.inputValue}})])])},staticRenderFns:[]};var r=s("Z0/y")(n,o,!1,function(t){s("eh/N")},"data-v-64b3f476",null).exports,c={name:"TextBox",mixins:[i],props:["placeholder","classes"],data:function(){return{}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"TextBox",on:{change:this.input}},[e("label",[e("textarea",{class:this.classes,attrs:{name:this.dataKey,cols:"10",rows:"4",placeholder:this.placeholder},domProps:{value:this.inputValue}})])])},staticRenderFns:[]};var u=s("Z0/y")(c,l,!1,function(t){s("lu1i")},"data-v-78f83f0f",null).exports,d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Upload"},[e("input",{attrs:{type:"file",name:"file"},on:{change:this.upload}}),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"add-button absolute-center"},[e("div",{staticClass:"add box-center"},[this._v("+")]),this._v(" "),e("p",[this._v("添加")])])}]};var h=s("Z0/y")({name:"Upload",data:function(){return{}},methods:{upload:function(t){this.$emit("addFile",t.target)}}},d,!1,function(t){s("Ylg8")},"data-v-1bd7c7c7",null).exports,p=s("OIM7"),f=s("sOKA"),v=s("nuAC"),m=s("3cXf"),_=s.n(m);var x=function(){return this.fetch.postJsonData("/secondhand/publish/article",{name:this.managerTitle,kind:_()(this.chooseList.chooseValue),detail:this.managerMessage,imgurl:_()(this.fileList),price:this.managerPrice,degree:"未添加崭新度"})},b=s("mi6u"),g=s("c7dQ"),y=s("/qaa"),L=s("zIJf"),C={name:"PublishPage",mixins:[v.a,Object(b.a)(y.a,this),Object(g.a)(y.c),L.a],data:function(){return{title:"发布",managerPrice:"",managerTitle:"",managerMessage:"",fileList:[],chooseList:{chooseValue:[],chooseList:[]}}},components:{HeaderSection:a.a,InputBox:r,TextBox:u,Upload:h,Classification:f.a,LoadImage:p.a},methods:{addFile:function(t){var e=this;y.b.fetchFile(t).then(function(t){console.log(t),e.fileList.push(t)})},deleteImage:function(t){var e=parseInt(t.target.dataset.index);this.fileList=this.fileList.filter(function(t,s){return s!==e})},userPublish:function(){var t=this,e=parseInt(this.managerPrice);isNaN(e)?alert("请在价格框中输入数字"):this.publishGoods().then(function(e){t.$router.push({path:"/second/home-page"})})},publishGoods:x}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PublishPage box-center second-market"},[s("header-section",[s("p",[t._v("发布")])]),t._v(" "),s("load-image",{attrs:{loadState:t.loadState}}),t._v(" "),s("input-box",{staticClass:"input-box box-center",attrs:{type:"text",placeholder:"标题",dataKey:"managerTitle",value:t.managerTitle},on:{userInput:t.updateData}}),t._v(" "),s("input-box",{staticClass:"input-box box-center",attrs:{type:"text",placeholder:"价格",dataKey:"managerPrice",value:t.managerPrice},on:{userInput:t.updateData}}),t._v(" "),s("br"),t._v(" "),s("text-box",{staticClass:"input-box box-center",attrs:{placeholder:"宝贝描述",dataKey:"managerMessage",value:t.managerMessage},on:{userInput:t.updateData}}),t._v(" "),s("div",{staticClass:"file-list input-box box-center"},[t._l(t.fileList,function(e,a){return s("div",{staticClass:"file-item"},[s("div",{staticClass:"add-icon text-center",attrs:{"data-index":a},on:{click:t.deleteImage}},[t._v("+")]),t._v(" "),s("img",{attrs:{src:e,alt:"图片加载失败"}}),t._v(" "),s("div",{staticClass:"file-item-footer text-center"},[t._v(t._s(0===a?"主图":"附图"))])])}),t._v(" "),s("upload",{staticClass:"upload file-item",on:{addFile:t.addFile}})],2),t._v(" "),s("br"),s("br"),t._v(" "),s("div",{staticClass:"clear input-box box-center"},[s("p",{staticStyle:{"font-size":"1rem",color:"#7F7F7F"}},[t._v("分类描述")]),t._v(" "),s("classification",{attrs:{classesList:t.classesList,dataKey:"chooseList",choosed:t.chooseList.chooseList},on:{choose:t.updateData}})],1),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"input-box text-center upload-message box-center",on:{click:t.userPublish}},[t._v("\n        确认发布\n    ")])],1)},staticRenderFns:[]};var P=s("Z0/y")(C,I,!1,function(t){s("tGTN")},"data-v-31a6e9c9",null);e.default=P.exports},lu1i:function(t,e){},"qN+Z":function(t,e){},sOKA:function(t,e,s){"use strict";var a={name:"Classification",props:{classesList:{type:Array,default:function(){return[]}},dataKey:{type:String},choosed:{type:Array,default:function(){return[]}}},beforeMount:function(){this.chooseList=this._props.choosed},data:function(){return{chooseList:[]}},methods:{choose:function(t){var e=this,s=parseInt(t.target.dataset.index),a=this.chooseList.indexOf(s);-1===a?this.chooseList.push(s):this.chooseList.splice(a,1),console.log(this.chooseList);var i=this.chooseList.sort();console.log(i);var n=i.map(function(t){return e._props.classesList[t]});this.$emit("choose",{key:this._props.dataKey,value:{chooseValue:n,chooseList:this.chooseList}})},includes:function(t){return-1===this.chooseList.indexOf(t)?"":"border-color:black;color:black"}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Classification"},[s("br"),t._v(" "),s("ul",{staticClass:"clear"},t._l(t.classesList,function(e,a){return s("li",{staticClass:"float-left",style:""+t.includes(a),attrs:{"data-index":a},on:{click:function(e){return e.stopPropagation(),t.choose(e)}}},[s("span",{attrs:{"data-index":a}},[t._v(t._s(e))])])}))])},staticRenderFns:[]};var n=s("Z0/y")(a,i,!1,function(t){s("qN+Z")},"data-v-33092e53",null);e.a=n.exports},tGTN:function(t,e){},zIJf:function(t,e,s){"use strict";e.a={data:function(){return{classesList:[]}},created:function(){var t=this;this.fetch.getJsonData("/secondhand/browse/allkind").then(function(e){t.classesList=e.map(function(t){return t.name})})}}}});
//# sourceMappingURL=3.6867a141b0ce6e21de63.js.map