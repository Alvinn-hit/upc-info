webpackJsonp([3],{"/gJc":function(t,e){},EVhy:function(t,e){},KTTd:function(t,e){},KyCs:function(t,e){},MLX6:function(t,e){},T5m3:function(t,e,a){t.exports=a.p+"static/img/userOff.d9c09ec.png"},VzVh:function(t,e,a){"use strict";function s(t){return console.log(t),{userData:{userHeader:t.ybhead,userId:t.userid,userName:t.ybname},managerData:{id:t.id,managerPrice:t.price,createTime:t.createtime,updateTime:t.updatetime,imgUrl:JSON.parse(t.imgurl),managerDetail:t.detail,collections:t.collections,reviews:t.reviews,name:t.name,isDeal:t.isdeal}}}a.d(e,"a",function(){return s}),e.b=function(t){var e=this;return this.fetch.getJsonData("/secondhand/browse/article",{page:t,pagesize:10}).then(function(t){var a=t.content;return{managerList:a=a.map(s.bind(e)),pageData:function(t){var e=t.last,a=t.first,s=t.totalElements,n=t.totalPages,i=t.sort,r=t.numberOfElements,o=t.size;return{last:e,first:a,totalElements:s,totalPages:n,sort:i,number:t.number,numberOfElements:r,size:o}}(t)}})}},gWTr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("sOKA"),n=a("nuAC"),i=a("zIJf"),r=a("/qaa"),o=a("mi6u"),c={name:"Search",props:[],mixins:[n.a,i.a,Object(o.a)(r.a)],data:function(){return{value:"",chooseList:{chooseValue:[],chooseList:[]},isFocus:!1}},watch:{chooseList:function(){this.value="",this.isFocus=!0}},methods:{focus:function(){this.isFocus=!0},search:function(){this.isFocus=!1,this.$emit("fetchSearch",{name:this.value,choose:this.chooseList.chooseValue})}},components:{Classification:s.a}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Search box-center",on:{click:function(e){return e.stopPropagation(),t.focus(e)}}},[a("div",{staticClass:"label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:"搜索宝贝"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),t._v(" "),t.isFocus?a("span",{on:{click:function(e){return e.stopPropagation(),t.search(e)}}},[t._v("搜索")]):t._e()]),t._v(" "),t.isFocus?a("div",{staticClass:"classification"},[a("classification",{attrs:{classesList:t.classesList,dataKey:"chooseList",choosed:t.chooseList.chooseList},on:{choose:t.updateData}})],1):t._e()])},staticRenderFns:[]};var u=a("Z0/y")(c,l,!1,function(t){a("KTTd")},"data-v-df44795e",null).exports,g=a("OIM7"),d=a("vAZX"),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ManagerDetails"},[a("ul",{staticClass:"clear"},[1===t.images.length?a("li",{staticClass:"float-left big"},[a("img",{attrs:{src:t.images[0]}})]):t._e(),t._v(" "),t._l(t.images,function(e,s){return 1!==t.images.length?a("li",{staticClass:"float-left"},[s<=1?a("img",{attrs:{src:e}}):t._e()]):t._e()})],2),t._v(" "),a("p",{staticClass:"describe overflow-omit"},[t._v(" "+t._s(t.describe))])])},staticRenderFns:[]};var f=a("Z0/y")({name:"ManagerDetails",props:["images","describe"],data:function(){return{}}},m,!1,function(t){a("mAsh")},"data-v-1fd8ca49",null).exports,h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ManagerReply"},[a("div",{staticClass:"reply"},[a("div",{staticClass:"border-left"}),t._v(" "),t._l(t.replyList,function(e,s){return s<=1?a("p",[t._v("\n            "+t._s(e.user)+" : "+t._s(e.message)+"\n        ")]):t._e()})],2)])},staticRenderFns:[]};var v=a("Z0/y")({name:"ManagerReply",data:function(){return{}},beforeMount:function(){},props:["replyList"]},h,!1,function(t){a("MLX6")},"data-v-a982d2b4",null).exports,p={name:"index",props:["userData","managerImage","managerData"],data:function(){return{managerReplyList:[{user:"用户1",message:"第一条消息"},{user:"用户二",message:"第二条消息"}]}},components:{ManagerHeader:d.a,ManagerDetails:f,ManagerReply:v}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ManagerSection"},[a("manager-header",{attrs:{userData:t.userData,managerPrice:t.managerData.managerPrice}}),t._v(" "),a("manager-details",{attrs:{images:t.managerData.imgUrl,describe:t.managerData.managerDetail}}),t._v(" "),a("hr",{staticStyle:{border:"1px solid #EBEBEB","border-bottom":"none"}}),t._v(" "),a("ul",{staticClass:"clear manager-footer"},[a("li",{staticClass:"float-right"},[t._v("留言"+t._s(t.managerData.reviews))]),t._v(" "),a("li",{staticClass:"float-right"},[t._v(" · ")]),t._v(" "),a("li",{staticClass:"float-right"},[t._v("收藏"+t._s(t.managerData.collections))])])],1)},staticRenderFns:[]};var b=a("Z0/y")(p,_,!1,function(t){a("KyCs")},"data-v-37e4493a",null).exports,D=a("/MSx"),L=a("c7dQ"),y=a("VzVh"),C={data:function(){return{pageList:[],nextPageNumber:1}},mounted:function(){window.addEventListener("scroll",this.scrollEvent)},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollEvent)},methods:{addPage:function(t){return t.pageData.number>=this.nextPageNumber?-1:(this.pageList.push(t),this.pageList.length)},fetchNextPage:function(){var t=this,e=this.nextPageNumber;e>=this.pageList[0].pageData.totalPages||(this.nextPageNumber+=1,this.getManagerList(e).then(function(e){t.addPage(e)}))},scrollEvent:function(){var t=document.documentElement.scrollTop+document.body.scrollTop,e=document.documentElement.clientHeight;document.documentElement.offsetHeight===t+e&&this.fetchNextPage()}}},x={name:"HomePage",mixins:[n.a,Object(o.a)(r.a),Object(L.a)(r.c),C],data:function(){return{title:"中国石油大学 二手市场",find:a("mZY8"),user:a("T5m3"),pageList:[],pageListData:[],flag:!0,nextPageNumber:1}},created:function(){var t=this;this.getManagerList(0).then(function(e){t.addPage(e)})},components:{ManagerSection:b,HeaderSection:D.a,Search:u,LoadImage:g.a},methods:{backTop:function(){window.scrollTo(0,0)},setPageWithData:function(t){this.flag&&(this.pageListData=this.pageList,this.flag=!1),this.pageList=[{managerList:t.map(function(t){return Object(y.a)(t)}),pageData:this.pageList[0].pageData}]},fetchSearch:function(t){var e=this;t.name?this.fetch.getJsonData("/secondhand/browse/findbyarticlename",{name:t.name}).then(function(t){e.setPageWithData(t)}):t.choose&&t.choose.length>0?this.fetch.getJsonData("/secondhand/browse/findbyarticlekind",{kind:t.choose.join("%")}).then(function(t){e.setPageWithData(t)}):this.pageList=this.pageListData},getManagerList:y.b}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HomePage second-market box-center"},[a("header-section",[a("p",[t._v("二手市场")])]),t._v(" "),a("search",{on:{fetchSearch:t.fetchSearch}}),t._v(" "),a("load-image",{attrs:{loadState:t.loadState}}),t._v(" "),t.pageList.length<=0||t.pageList[0].managerList.length<=0?t._e():a("hr",{staticStyle:{border:"1px solid #EBEBEB","border-bottom":"none"}}),t._v(" "),t.pageList.length<=0||t.pageList[0].managerList.length<=0?a("p",{staticClass:"text-center",staticStyle:{color:"rgb(179, 167, 167)","font-size":"0.7rem","margin-top":"1rem"}},[t._v("\n        没有搜索结果\n    ")]):t._e(),t._v(" "),t._l(t.pageList,function(e){return a("div",{attrs:{"page-num":e.pageData.number}},t._l(e.managerList,function(t){return a("div",[a("router-link",{staticStyle:{display:"block"},attrs:{to:"/second/details/"+t.managerData.id}},[a("manager-section",{staticClass:"bottom-style",attrs:{userData:t.userData,managerImage:t.managerData.imgUrl,managerData:t.managerData}})],1)],1)}))}),t._v(" "),a("load-image",{attrs:{loadState:t.loadState}}),t._v(" "),a("div",{staticStyle:{height:"6rem"}}),t._v(" "),a("div",{staticClass:"footer absolute-horizontal-center"},[a("ul",{staticClass:"clear"},[a("li",{staticClass:"float-left",on:{click:t.backTop}},[a("img",{attrs:{src:t.find}}),t._v(" "),a("p",[t._v("发现")])]),t._v(" "),a("li",{staticClass:"float-left add"},[a("router-link",{staticClass:"absolute-horizontal-center",staticStyle:{display:"block"},attrs:{to:"/second/publish"}},[a("span",[t._v("+")])]),t._v(" "),a("img",{staticStyle:{opacity:"0"},attrs:{src:""}}),t._v(" "),a("p",[t._v("发布")])],1),t._v(" "),a("li",{staticClass:"float-left"},[a("router-link",{attrs:{to:"/second/user-center"}},[a("img",{attrs:{src:t.user}}),t._v(" "),a("p",[t._v("我的")])])],1)])])],2)},staticRenderFns:[]};var E=a("Z0/y")(x,P,!1,function(t){a("/gJc")},"data-v-7081d924",null);e.default=E.exports},mAsh:function(t,e){},mZY8:function(t,e,a){t.exports=a.p+"static/img/findOn.d8e5d4b.png"},vAZX:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"UserBox"},[a("ul",{staticClass:"clear"},[a("li",[a("img",{attrs:{src:t.userData.userHeader}})]),t._v(" "),a("li",{staticClass:"second"},[a("span",[t._v(t._s(t.userData.userName))])]),t._v(" "),a("li",[a("p",[t._v("$"+t._s(t.managerPrice))])])])])},staticRenderFns:[]};var n=a("Z0/y")({name:"ManagerHeader",props:["userData","managerPrice"],data:function(){return{}}},s,!1,function(t){a("EVhy")},null,null);e.a=n.exports}});
//# sourceMappingURL=3.7c43b5ecfc968874bec4.js.map