webpackJsonp([5],{"+HuD":function(e,t){},AWoY:function(e,t){},DnUy:function(e,t){},F7UG:function(e,t,a){"use strict";var s={name:"TextBox",mixins:[a("temQ").a],props:["placeholder","classes"],data:function(){return{}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"TextBox",on:{change:this.input}},[t("label",[t("textarea",{class:this.classes,attrs:{name:this.dataKey,cols:"10",rows:"4",placeholder:this.placeholder},domProps:{value:this.inputValue}})])])},staticRenderFns:[]};var n=a("Z0/y")(s,i,!1,function(e){a("DnUy")},"data-v-468c9f4e",null);t.a=n.exports},K787:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/MSx"),i=a("+hoI"),n=a("F7UG"),r=a("w+xh"),o=a("OIM7"),c=a("sOKA"),l=a("nuAC"),u=a("3cXf"),d=a.n(u);var h=function(){return this.fetch.postJsonData("/secondhand/publish/updatearticle",{articleid:this.managerId,name:this.managerTitle,kind:d()(this.chooseList.chooseValue),detail:this.managerMessage,imgurl:d()(this.fileList),price:parseFloat(this.managerPrice),degree:"未添加崭新度"})},p=a("mi6u"),f=a("c7dQ"),m=a("/qaa"),v=a("zIJf"),g={name:"EditArticle",props:["articleId"],mixins:[l.a,Object(p.a)(m.a,this),Object(f.a)(m.c),v.a],created:function(){var e=this;this.fetch.getJsonData("/second/user/info").then(function(t){return e.fetch.getJsonData("/secondhand/browse/onearticle",{articleid:e.$route.params.articleId}).then(function(a){t.userid!=a.userid&&(alert("没有权限编辑！"),e.$router.push("/second/home-page")),e.managerId=parseInt(a.id),e.managerTitle=e.$refs.title.inputValue=a.name,e.managerPrice=e.$refs.price.inputValue=a.price,e.managerMessage=e.$refs.message.inputValue=a.detail,e.fileList=JSON.parse(a.imgurl)})})},data:function(){return{title:"发布",managerPrice:"",managerTitle:"",managerMessage:"",fileList:[],chooseList:{chooseValue:[],chooseList:[]}}},components:{HeaderSection:s.a,InputBox:i.a,TextBox:n.a,Upload:r.a,Classification:c.a,LoadImage:o.a},methods:{addFile:function(e){var t=this;m.b.fetchFile(e).then(function(e){console.log(e),t.fileList.push(e)})},deleteImage:function(e){var t=parseInt(e.target.dataset.index);this.fileList=this.fileList.filter(function(e,a){return a!==t})},userPublish:function(){var e=this,t=parseInt(this.managerPrice);isNaN(t)?alert("请在价格框中输入数字"):this.updateGoods().then(function(t){e.$router.push({path:"/second/home-page"})})},updateGoods:h}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"PublishPage box-center second-market"},[a("header-section",[a("p",[e._v("编辑")])]),e._v(" "),a("load-image",{attrs:{loadState:e.loadState}}),e._v(" "),a("input-box",{ref:"title",staticClass:"input-box box-center",attrs:{type:"text",placeholder:"标题",dataKey:"managerTitle",value:e.managerTitle},on:{userInput:e.updateData}}),e._v(" "),a("input-box",{ref:"price",staticClass:"input-box box-center",attrs:{type:"text",placeholder:"价格",dataKey:"managerPrice",value:e.managerPrice},on:{userInput:e.updateData}}),e._v(" "),a("br"),e._v(" "),a("text-box",{ref:"message",staticClass:"input-box box-center",attrs:{placeholder:"宝贝描述",dataKey:"managerMessage",value:e.managerMessage},on:{userInput:e.updateData}}),e._v(" "),a("div",{staticClass:"file-list input-box box-center"},[e._l(e.fileList,function(t,s){return a("div",{staticClass:"file-item"},[a("div",{staticClass:"add-icon text-center",attrs:{"data-index":s},on:{click:e.deleteImage}},[e._v("+")]),e._v(" "),a("img",{attrs:{src:t,alt:"图片加载失败"}}),e._v(" "),a("div",{staticClass:"file-item-footer text-center"},[e._v(e._s(0===s?"主图":"附图"))])])}),e._v(" "),a("upload",{staticClass:"upload file-item",on:{addFile:e.addFile}})],2),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"clear input-box box-center"},[a("p",{staticStyle:{"font-size":"1rem",color:"#7F7F7F"}},[e._v("分类描述")]),e._v(" "),a("classification",{ref:"classification",attrs:{classesList:e.classesList,dataKey:"chooseList",choosed:e.chooseList.chooseList},on:{choose:e.updateData}})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"input-box text-center upload-message box-center",on:{click:e.userPublish}},[e._v("\n        确认发布\n    ")])],1)},staticRenderFns:[]};var _=a("Z0/y")(g,x,!1,function(e){a("+HuD")},"data-v-182b0898",null);t.default=_.exports},"w+xh":function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Upload"},[t("input",{attrs:{type:"file",name:"file"},on:{change:this.upload}}),this._v(" "),this._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"add-button absolute-center"},[t("div",{staticClass:"add box-center"},[this._v("+")]),this._v(" "),t("p",[this._v("添加")])])}]};var i=a("Z0/y")({name:"Upload",data:function(){return{}},methods:{upload:function(e){this.$emit("addFile",e.target)}}},s,!1,function(e){a("AWoY")},"data-v-4e41c86c",null);t.a=i.exports}});
//# sourceMappingURL=5.c8a451a0b95d2eddc039.js.map